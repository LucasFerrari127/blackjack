
(()=>{"use strict";let e=[],t=[];const n=["C","D","H","S"],r=["A","J","Q","K"],l=document.querySelector("#btnPedir"),s=document.querySelector("#btnNuevo"),a=document.querySelector("#btnDetener"),o=document.querySelectorAll("small"),d=document.querySelectorAll(".divCartas"),i=n=>{e=c(),t=[];for(let e=0;e<n;e++)t.push(0);l.disabled=!1,a.disabled=!1,o.forEach(e=>e.innerText=0),d.forEach(e=>e.innerHTML="")},c=()=>{e=[];for(let t=2;t<=10;t++)for(let r of n)e.push(t+r);for(let t of r)for(let r of n)e.push(t+r);return _.shuffle(e)},u=()=>{if(0===e.length)throw"No hay mÃ¡s cartas en la baraja";return e.pop()},b=(e,n)=>(t[n]=t[n]+(e=>{const t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:1*t})(e),o[n].innerText=t[n],t[n]),f=e=>{let n=0;do{const r=u();if(n=b(r,t.length-1),m(r,t.length-1),e>21)break}while(e>n&&n<=21);setTimeout(()=>{h(n)},250)},m=(e,t)=>{const n=document.createElement("img");n.src=`assets/cartas/${e}.png`,n.classList.add("carta"),d[t].append(n)};l.addEventListener("click",()=>{const e=u(),t=b(e,0);m(e,0),t>21?(setTimeout(()=>{alert("Perdiste, intentalo de nuevo")},250),l.disabled=!0,a.disabled=!0,f(t)):21===t&&(l.disabled=!0,a.disabled=!0,f(t),setTimeout(()=>{h()},250))}),a.addEventListener("click",()=>{f(t[0]),l.disabled=!0,a.disabled=!0});const h=()=>{const[e,n]=t;n>e&&n<=21?alert("Perdiste, intentalo de nuevo"):n===e?alert("Empate, intentalo de nuevo"):alert("Ganaste")};s.addEventListener("click",()=>{i(2)}),i(2)})();